<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title></title>
	</head>
	<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<!-- 	<script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.1.1/js/bootstrap.min.js"></script>
	<link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.1.1/css/bootstrap.css" rel="stylesheet"> -->

	<!-- 	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.0/font/bootstrap-icons.css"> -->

	<!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css"
		integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous" />

	<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
		integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous">
	</script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF" crossorigin="anonymous">
	</script>

	<style>
		.form-sign {
			padding: 10px;
		}

		.card {
			position: relative;
			margin-right: 5px;
			margin-bottom: 30px;
		}

		.btn-card-action {
			position: absolute;
			bottom: 0;
			left: 50%;
			transform: translate(-50%, 50%);
		}

		.uid-input {
			width: 300px !important;
		}

		.btn.btn-sm.btn-card {
			width: 66px;
			font-size: 12px;
			margin-right: 10px;
		}

		.btn-action {
			max-width: 50px;
			line-height: 24px;
			text-align: center;
			font-size: 14px;
			color: #fff;
			background-color: #17a2b8;
			margin-right: 10px;
			cursor: pointer;
			font-weight: 600;
		}

		.add-btn {
			padding: 5px;
			border-radius: 5px;
		}

		.del-btn {}

		.btn-action.del-btn-row {
			width: 25px;
			height: 25px;
			background-color: #d9534f;
		}

		.table-area {
			margin: 10px;
			display: flex;
			flex-wrap: wrap;
		}

		.wrap {
			width: 32%;
			margin-left: 20px;
		}

		.table-item {
			width: 100%;
			display: flex;
			flex-wrap: wrap;
			background-color: #eee;
			padding: 10px;
			border-radius: 10px;
		}

		.table-item+.table-item {
			margin-left: 20px;
		}

		.item {
			width: 48%;
			font-size: 12px;
		}

		.btn-area {}

		.btn-group {
			display: flex;
			justify-content: space-around;
		}

		.btn-group a {
			font-size: 12px;
		}

		/*  Class */
		.center-block {
			display: block;
			margin-left: auto;
			margin-right: auto;
		}

		.red {
			width: 100%;
			color: red;
			display: flex;
			justify-content: space-around;
		}

		.red p {
			width: 48%;
		}

		.red p a {
			font-size: 12px;
		}

		li {
			list-style: none;
		}

		/* 弹窗内样式修正 */
		.signUpModal {
			width: 600px !important;
		}

		.list-group-item {
			display: flex;
			justify-content: space-between;
		}

		.list-group-item span {
			display: inline-block;
		}

		.list-group-item .uids {
			width: 75%;
		}

		.list-group-item .number {
			width: 20%;
		}
	</style>
	<body>
		<style type="text/css">
			.box{
				width: 500px;
				height: 500px;
				background-color: #008080;
				border-top: 1px solid #ccc;
			}
			.inner{
				width: 50px;
				height: 50px;
				background-color: #000000;
				/* margin: 0 auto; */
				margin: auto;
			}
		</style>
		<div class="box">
			<div class="inner"></div>
		</div>
		
		
		
		<!-- 查看Modal -->
		<div class="modal fade" id="checkoutModal" tabindex="-1">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="exampleModalLabel">当前牌桌机器人：</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body robot-list">
						<ul class="list-group">
							<li class="list-group-item"><span class="uids">UID</span> <span class="number">编号</span>
							</li>
							<li class="list-group-item">A second item</li>
							<li class="list-group-item">A third item</li>
							<li class="list-group-item">A fourth item</li>
							<li class="list-group-item">And a fifth one</li>
						</ul>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">
							Close
						</button>
						<!-- <button type="button" class="btn btn-primary">Save changes</button> -->
					</div>
				</div>
			</div>
		</div>
		<!-- 查看Modal end  -->

		<!-- 删除Modal -->
		<div class="modal fade" id="deleteModal" tabindex="-1">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<!-- <div class="modal-body">...</div> -->
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">
							Close
						</button>
						<button type="button" class="btn btn-primary">Save changes</button>
					</div>
				</div>
			</div>
		</div>
		<!-- 删除Modal end  -->

		<!-- 报名Modal end  -->
		<div class="modal fade" id="signUpModal" tabindex="-1">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="exampleModalLabel">
							报名玩家设置：
							<!-- <a href="#" class="add-btn">添加规则</a> -->
							<span class="rounded-circle1 align-middle btn-action add-btn" onclick="addLine()">
								添加规则
							</span>
						</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<form class="form-sign">
							<div class="form-inline sign-item base-item">
								<div class="order">1</div>
								<div class="form-group mb-2">
									<label for="uids" class="sr-only">UID：</label>
									<input type="text" class="form-control uid-input" placeholder="UID" />
								</div>
								<div class="form-group mx-sm-3 mb-2">
									<label for="number" class="sr-only">编号：</label>
									<input type="text" class="form-control number-input" size="7" placeholder="编号" />
								</div>
								<div class="form-group mb-2 btn-action-row">
									<div class="rounded-circle align-middle btn-action del-btn-row"
										onclick="removeLine(this)">
										-
									</div>
								</div>
							</div>
						</form>

					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">
							cancel
						</button>
						<button type="button" class="btn btn-primary" onclick="postrules()">create</button>
					</div>
				</div>
			</div>
		</div>
		<!-- 报名Modal end  -->

		<!-- 面包屑 -->
		<nav aria-label="breadcrumb">
			<ol class="breadcrumb">
				<li class="breadcrumb-item"><a href="#">Home</a></li>
				<li class="breadcrumb-item"><a href="#">Library</a></li>
				<li class="breadcrumb-item active" aria-current="page">Data</li>
			</ol>
		</nav>

		<!-- 数据展示 -->
		<div class="table-area">
			<div class="card" style="width: 18rem">
				<div class="card-body">
					<ul class="table-item">
						<li class="item">游戏类型：<span>ZOOM</span></li>
						<li class="item">玩家数量：<span>200</span></li>
						<li class="item">玩家福利：<span>200</span></li>
						<li class="item">最小迈入：<span>200</span></li>
						<li class="item">最小迈入：<span>200</span></li>
						<li class="item">最小迈入：<span>200</span></li>
						<li class="item">最小迈入：<span>200</span></li>
						<li class="item">最小迈入：<span>200</span></li>
						<li class="item">最小迈入：<span>200</span></li>
					</ul>
					<div class="btn-card-action d-flex justify-content-center">
						<button type="button" class="btn btn-sm btn-info btn-card checkout-btn">
							查看
						</button>
						<button type="button" class="btn btn-sm btn-info btn-card signup-btn">
							报名
						</button>
						<button type="button" class="btn btn-sm btn-info btn-card del-btn">
							一键删除
						</button>
					</div>
				</div>
			</div>

			<div class="card" style="width: 18rem">
				<div class="card-body">
					<ul class="table-item">
						<li class="item">游戏类型：<span>ZOOM</span></li>
						<li class="item">玩家数量：<span>200</span></li>
						<li class="item">玩家福利：<span>200</span></li>
						<li class="item">最小迈入：<span>200</span></li>
						<li class="item">最小迈入：<span>200</span></li>
						<li class="item">最小迈入：<span>200</span></li>
						<li class="item">最小迈入：<span>200</span></li>
						<li class="item">最小迈入：<span>200</span></li>
						<li class="item">最小迈入：<span>200</span></li>
					</ul>
					<div class="btn-card-action d-flex justify-content-center">
						<button type="button" class="btn btn-sm btn-info btn-card">
							查看
						</button>
						<button type="button" class="btn btn-sm btn-info btn-card">
							报名
						</button>
						<button type="button" class="btn btn-sm btn-info btn-card">
							一键删除
						</button>
					</div>
				</div>
			</div>
			<div class="card" style="width: 18rem">
				<div class="card-body">
					<ul class="table-item">
						<li class="item">游戏类型：<span>ZOOM</span></li>
						<li class="item">玩家数量：<span>200</span></li>
						<li class="item">玩家福利：<span>200</span></li>
						<li class="item">最小迈入：<span>200</span></li>
						<li class="item">最小迈入：<span>200</span></li>
						<li class="item">最小迈入：<span>200</span></li>
						<li class="item">最小迈入：<span>200</span></li>
						<li class="item">最小迈入：<span>200</span></li>
						<li class="item">最小迈入：<span>200</span></li>
					</ul>
					<div class="btn-card-action d-flex justify-content-center">
						<button type="button" class="btn btn-sm btn-info btn-card">
							查看
						</button>
						<button type="button" class="btn btn-sm btn-info btn-card">
							报名
						</button>
						<button type="button" class="btn btn-sm btn-info btn-card">
							一键删除
						</button>
					</div>
				</div>
			</div>
			<div class="card" style="width: 18rem">
				<div class="card-body">
					<ul class="table-item">
						<li class="item">游戏类型：<span>ZOOM</span></li>
						<li class="item">玩家数量：<span>200</span></li>
						<li class="item">玩家福利：<span>200</span></li>
						<li class="item">最小迈入：<span>200</span></li>
						<li class="item">最小迈入：<span>200</span></li>
						<li class="item">最小迈入：<span>200</span></li>
						<li class="item">最小迈入：<span>200</span></li>
						<li class="item">最小迈入：<span>200</span></li>
						<li class="item">最小迈入：<span>200</span></li>
					</ul>
					<div class="btn-card-action d-flex justify-content-center">
						<button type="button" class="btn btn-sm btn-info btn-card">
							查看
						</button>
						<button type="button" class="btn btn-sm btn-info btn-card">
							报名
						</button>
						<button type="button" class="btn btn-sm btn-info btn-card">
							一键删除
						</button>
					</div>
				</div>
			</div>
			<div class="card" style="width: 18rem">
				<div class="card-body">
					<ul class="table-item">
						<li class="item">游戏类型：<span>ZOOM</span></li>
						<li class="item">玩家数量：<span>200</span></li>
						<li class="item">玩家福利：<span>200</span></li>
						<li class="item">最小迈入：<span>200</span></li>
						<li class="item">最小迈入：<span>200</span></li>
						<li class="item">最小迈入：<span>200</span></li>
						<li class="item">最小迈入：<span>200</span></li>
						<li class="item">最小迈入：<span>200</span></li>
						<li class="item">最小迈入：<span>200</span></li>
					</ul>
					<div class="btn-card-action d-flex justify-content-center">
						<button type="button" class="btn btn-sm btn-info btn-card">
							查看
						</button>
						<button type="button" class="btn btn-sm btn-info btn-card">
							报名
						</button>
						<button type="button" class="btn btn-sm btn-info btn-card">
							一键删除
						</button>
					</div>
				</div>
			</div>
		</div>

		<!-- 		<form class="form-sign">
			<div class="form-inline sign-item">
				<div class="order">1</div>
				<div class="form-group mb-2">
					<label for="uids" class="sr-only">UID：</label>
					<input type="text" class="form-control uid-input" placeholder="UID" />
				</div>
				<div class="form-group mx-sm-3 mb-2">
					<label for="number" class="sr-only">编号：</label>
					<input type="text" class="form-control number-input" size="7" placeholder="编号" />
				</div>
				<div class="form-group mb-2 btn-action-row">
					<div class="rounded-circle align-middle btn-action del-btn-row" onclick="removeLine(this)">
						-
					</div>
				</div>
			</div>
		</form> -->

		<!-- 操作按钮 -->
		<div class="rounded-circle align-middle btn-action add-btn" onclick="addLine()">
			+
		</div>
		<div class="rounded-circle align-middle btn-action del-btn" onclick="postrules()">
			提交数据
		</div>

		<script type="text/javascript">
			let tempHtml = ''
			let rules_length = 1

			function signUP(params) {
				$('#signUpModal').modal('show')
			}

			function deleteRobot(params) {
				$('#deleteModal').modal('show')
			}

			let currentIndex = 0

			// 添加行
			function addLine() {
				rules_length += 1
				console.log('add')
				$('.form-sign').append(`
        <div class="form-inline sign-item">
          <div class="order">${rules_length}</div>
          <div class="form-group mb-2">
            <label for="uids" class="sr-only">UID：</label>
            <input type="text" class="form-control uid-input" placeholder="UID" />
          </div>
          <div class="form-group mx-sm-3 mb-2">
            <label for="number" class="sr-only">编号：</label>
            <input type="text" class="form-control number-input" size="7" placeholder="编号" />
          </div>
          <div class="form-group mb-2 btn-action-row">
            <div
              class="rounded-circle align-middle btn-action del-btn-row"
              onclick="removeLine(this)"
            >-</div>
          </div>
        </div>
        `)
			}

			// 删除行
			function removeLine(self) {
				console.log(self)
				if (self != null) {
					currentIndex = $(self).parent().parent().find('.order').text()
				}
				if (currentIndex == 0) {
					alert('请选择一项！')
					return false
				}
				if (currentIndex == 1) {
					alert('请至少保留一项配置！')
					return false
				}
				console.log('currentIndex=>', currentIndex)
				if (confirm('确定要删除该记录吗？')) {
					$('.form-sign .sign-item').each(function() {
						let itemIndex = $(this).children('.order').text()
						if (itemIndex == currentIndex) {
							$(this).remove()
						}
						if (itemIndex > currentIndex) {
							$(this)
								.children('.order')
								.each(function(i) {
									if (i == 0) $(this).html(itemIndex - 1)
								})
						}
					})
					rules_length -= 1
				}
			}

			//提交数据

			function postrules() {
				let postData = []
				$('.form-sign .sign-item').each(function() {
					let _uids = $(this).find('.uid-input').val()
					let _number = $(this).find('.number-input').val()
					console.log(_uids)
					_uids = _uids.replace(/，/g, ',').replace(/ /g, ',').split(',').filter((id) => id.length == 5)
					// console.log({
					// 	_uids,
					// 	_number
					// })
					postData.push({
						uids: _uids,
						num: _number
					})
				})
				console.log({
					postData
				})
			}
			// 查看
			$('.checkout-btn').click(function() {
				$('#checkoutModal').modal('show')
			})
			// 报名
			$('.signup-btn').click(signUP)
			// 删除牌桌
			$('.del-btn').click(deleteRobot)

			// var clone_modal = $('#signUpModal').clone();
			var clone_modal_item = $('.base-item').clone();
			$('#signUpModal').on('hidden.bs.modal', function(event) {
				// 关闭 报名弹窗时，清楚所有书写状态
				// 关闭模态框时还原所有数据
				// console.log(clone_modal)
				// $(this).remove();
				$('.form-sign').html(clone_modal_item); // 还原模态框的html
				rules_length = 1 // 还原 rules 的 index
				postData = [] // 清空本次收集的 uids


			})
		</script>
		<style>
			.mini-input {
				width: 80px !important;
			}

			.dialog {
				width: 500px;
				background-color: #008080;
				padding: 20px;
			}

			/* 	.robot.list-group {
				display: flex !important;
			}

			.robot.list-group .list-group-item {
				width: 40%;
			} */
		</style>
	</body>
</html>
